#!/usr/bin/env python3

import sys, json, subprocess

if hasattr(sys.stdout, "reconfigure"):
    sys.stdout.reconfigure(encoding="utf-8")

print("✏️ Escribe tu texto (Ctrl+D para terminar):")
texto = sys.stdin.read().rstrip("\n")
resultado = json.dumps(texto, ensure_ascii=False)
subprocess.run("pbcopy", text=True, input=resultado)

print("✅ Texto convertido a string JSON")
print("📋 Copiado al portapapeles:")
print(resultado)
